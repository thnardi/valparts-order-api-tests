{% extends "admin/layout.twig" %}
{% block html_title %}Usuários - Administração - {{ parent() }}{% endblock %}
{% set nav_active = 'user' %}
{% block breadcrumbs %}
<ol class="breadcrumb">
  <li><a href="{{ base_url() }}/admin">Início</a></li>
  <li class="active">Usuários</li>
</ol>
{% endblock %}
{% block content %}
<div class="row">
  <div class="col-xs-12 col-sm-3">
    <a class="btn btn-success" href="{{ base_url() }}/admin/user/add">
      <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Novo Administrador
    </a>
  </div>
</div>
<div class="card">
  <div class="card-header" data-background-color="blue">
    <div class="row">
      <div class="col-xs-8 col-sm-8">
        <h3>{{ page_title }}</h3>
      </div>
    </div>
  </div>
  <div class="card-content">
    <div class="row">
      <div class="col-xs-12">
        {% if users %}
          <div class="table-responsive">
            <table class="table table-striped">
              <thead>
                <tr>
                  <th>Email</th>
                  <th>Nome</th>
                  <th>Criado em</th>
                  <th>Nível</th>
                  <th class="th-button" style="width:100px;"></th>
                  {# <th class="th-button" style="width:100px;"></th> #}
                </tr>
              </thead>
              <tbody>
                {% for user in users %}
                <tr>
                  <td>
                    <a href="{{ base_url() }}/admin/user/{{ user.id }}">
                      {{ user.email }}
                    </a>
                  </td>
                  <td>{{ user.name }}</td>
                  <td>{{ user.created_at }}</td>
                  <td>
                    {% if user.type == 4 %}root{% endif %}
                    {% if user.type == 3 %}Alto{% endif %}
                    {% if user.type == 2 %}Médio{% endif %}
                    {% if user.type == 1 %}Baixo{% endif %}
                  </td>
                  <td>
                    {% if user.type >= admin_ancora.type and user.id != admin_ancora.id %}
                    {% elseif user.type == 4 %}
                    {% else %}
                      <a class="btn btn-xs btn-default" style="width:100%; margin-top:2px; margin-bottom:2px;" href="{{ base_url() }}/admin/user/edit/{{ user.id }}">
                        <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Editar
                      </a>
                      <a class="btn btn-xs btn-danger" style="width:100%; margin-top:2px; margin-bottom:2px;" href="{{ base_url() }}/admin/user/delete/{{ user.id }}">
                        <span class="glyphicon glyphicon-trash" aria-hidden="true"></span> Apagar
                      </a>
                    {% endif %}
                  </td>
                {% endfor %}
              </tbody>
            </table>
          </div>
        {% else %}
          <div class="alert alert-danger" role="alert">Não existem usuários cadastrados</div>
        {% endif %}
      </div>
    </div>
    <div class="row">
        <div class="col-xs-12">
          <ul class="pager">
            <li{% if page == 1 %} class="disabled"{% endif %}>
              <a{% if page > 1 %} href="{{ base_url() }}/admin/user?page={{ page - 1 }}"{% endif %}>Anterior</a>
            </li>
            <li{% if page >= amountPages %} class="disabled"{% endif %}>
              <a{% if page < amountPages %} href="{{ base_url() }}/admin/user?page={{ page + 1 }}"{% endif %}>Próximo</a>
            </li>
          </ul>
        </div>
    </div>
  </div>
</div>



{% endblock %}
