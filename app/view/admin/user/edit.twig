{% extends "admin/layout.twig" %}
{% block html_title %}Usuários - Administração - {{ parent() }}{% endblock %}
{% set nav_active = 'user' %}
{% block breadcrumbs %}

  <ol class="breadcrumb">
  <li><a href="{{ base_url() }}/admin">Início</a></li>
  <li class="active">Editar</li>
</ol>

{% endblock %}
{% block content %}

<div class="card">
  <div class="card-header" data-background-color="blue">
    <h3>Editar Administrador</h3>
  </div>
  <div class="card-content">
    <div class="row">
      <div class="col-xs-12 col-sm-10">
        <form id="userform" role="form" data-toggle="validator" action="{{ base_url() }}/admin/user/update" method="POST">
          <input type="hidden" name="id" value="{{ user.id }}">
          <div class="row">
            <div class="col-xs-12 col-sm-6">
              <div class="form-group">
                <label for="inputName">Nome</label>
                <input type="text" class="form-control" id="inputName" name="name" value="{{ user.name }}" data-minlength="5" required>
              </div>
            </div>

            <div class="col-xs-12 col-sm-6">
              <div class="form-group">
                <label for="inputEmail">Email</label>
                <input type="email" class="form-control" id="inputEmail" name="email" value="{{ user.email }}" required>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-xs-12 col-sm-6">
              <div class="form-group">
                <label for="inputTelefone">Telefone</label>
                <input type="text" class="form-control" id="inputTelefone" name="telefone" value="{{ user.telefone }}" required>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-xs-12 col-sm-6">
              <div class="form-group">
                <label for="inputLogin">Login</label>
                <input type="text" class="form-control" id="inputLogin" name="slug" value="{{ user.slug }}" onkeyup="return AlteraMinusculas(this);"  required>

              </div>
            </div>
            <div class="col-xs-12 col-sm-6">
              <div class="form-group">
                <label for="inputPassword">Nova senha</label>
                <input type="password" class="form-control" id="inputPassword" name="password">
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-xs-12 col-sm-6">
              <div class="form-group">
                <label for="type">Nível Permissão</label>
                <select class="form-control" id="type" name="type">
                  {% if user.type >= 4 %}<option value="4" {% if user.type == 4 %}checked{% endif %}>root</option>{% endif %}
                  {% if user.type >= 3 %}<option value="3" {% if user.type == 3 %}checked{% endif %}>Alto</option>{% endif %}
                  {% if user.type >= 2 %}<option value="2" {% if user.type == 2 %}checked{% endif %}>Médio</option>{% endif %}
                  {% if user.type >= 1 %}<option value="1" {% if user.type == 1 %}checked{% endif %}>Baixo</option>{% endif %}
                </select>
              </div>
            </div>
          </div>
          <div class="form-group">
            <button type="submit" class="btn btn-primary">Atualizar</button>
          </div>
        </form>
        <script type="text/javascript">

        </script>
      </div>
    </div>
  </div>
</div>

{% endblock %}
{% block javascripts %}
<script>

  $('body').on('keydown', 'input, select, textarea', function(e) {
    var self = $(this)
      , form = self.parents('form:eq(0)')
      , focusable
      , next
      ;

    //console.log(e.currentTarget);
    if (e.keyCode == 13) {
        focusable = form.find('input,a,select,button,textarea').filter(':visible');
        next = focusable.eq(focusable.index(this)+1);
        if (next.length || e.currentTarget.id == "selectRole") {
          if (e.currentTarget.id == "selectRole") {
            form.submit();
          }
          next.focus();

        } else {
            form.submit();
        }
        return false;
    }
  });

</script>

<script type="text/javascript">
  function AlteraMinusculas(campo) {
  campo.value=campo.value.toLowerCase();
}
</script>
{% endblock %}
