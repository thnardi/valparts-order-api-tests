{% extends "admin/layout.twig" %}
{% block html_title %}Permissões - Administração - {{ parent() }}{% endblock %}
{% set nav_active = 'permission' %}
{% block breadcrumbs %}
  <ol class="breadcrumb">
    <li><a href="{{ base_url() }}/admin">Início</a></li>
    <li class="active">Permissões</li>
  </ol>
{% endblock %}
{% block content %}

  <div class="card">
    <div class="card-header" data-background-color="blue">
      <div class="row">
        <div class="col-sm-8">
          <h3>Permissões</h3>
        </div>
        
      </div>
    </div>
    <div class="card-content">
      <div class="row">
        <div class="col-sm-12">
          {% if permissions %}
            <table class="table table-hover data-table">
              <thead>
                <tr>
                  <th>Rota</th>
                  <th>Descrição</th>
                  <th>Cargos</th>
                  <th class="th-button"></th>
                  <th class="th-button"></th>
                </tr>
              </thead>
              <tbody>
                {% for permission in permissions %}
                <tr>
                  <td>{{ permission.resource }}</td>
                  <td>{{ permission.description }}</td>
                  <td>{% for role_id in permission.role_list %}

                        {% for role in roles %}
                            {% if role_id == role.id %}
                              <p>{{ role_id }} - {{ role.name }}</p>
                            {% endif %}
                        {% endfor  %}

                      {% endfor %}
                  </td>
                  <td><a class="btn btn-xs btn-default" href="{{ base_url() }}/admin/permission/edit/{{ permission.id }}">
                    <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Editar
                  </a></td>
                  
                </tr>
                {% endfor %}
              </tbody>
            </table>
          {% else %}
            <div class="alert alert-danger" role="alert">Não existem permissões cadastradas</div>
          {% endif %}
        </div>
      </div>
    </div>
  </div>

{% endblock %}
